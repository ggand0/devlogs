# Ubuntu 24.04 Post-Upgrade Configuration

**Date:** 2025-01-05
**Context:** Additional configuration after fixing GUI issues (see devlog 018)

## X11 Session Status

~~Successfully logged into "Ubuntu on Xorg" from GDM login screen.~~

**UPDATE:** X11 was NOT actually working. GDM silently fell back to Wayland when X11 crashed. `$XDG_SESSION_TYPE` still showed `wayland` despite selecting "Ubuntu on Xorg". See devlog 020 for the actual fix.

## Re-enabling GNOME Extensions

Extensions were disabled earlier during debugging:
```bash
sudo -u $(whoami) dbus-launch gsettings set org.gnome.shell disable-user-extensions true
```

Re-enabled with:
```bash
gsettings set org.gnome.shell disable-user-extensions false
```

Then `Alt+F2` → `r` → Enter to restart GNOME Shell.

Note: Some extensions may be incompatible with GNOME 46 (Ubuntu 24.04).

## VS Code Titlebar Fix

VS Code uses custom titlebar by default. Changed to native system titlebar:

Settings → search "title bar style" → change `Window: Title Bar Style` to `native`

Or in `settings.json`:
```json
"window.titleBarStyle": "native"
```

## Brave/Chrome Titlebar Issue (UNRESOLVED)

Both Brave and Chrome are missing the "Use system title bar and borders" option:
- Not in Settings → Appearance
- Not in right-click context menu on tab bar
- Not in chrome://flags or brave://flags

This is a known upstream Chromium bug:
- [Chromium Issue #375736128](https://issues.chromium.org/issues/375736128)
- [Brave GitHub Issue #51275](https://github.com/brave/brave-browser/issues/51275)

**Workaround:** Use `Super+drag` anywhere on window to move it (GNOME built-in).

## Brave Theme Fix

Brave theme (Sea Foam from Chrome Web Store) was lost after clicking "Classic". The theme showed as installed but wasn't active.

**Fix:** Go to [Chrome Web Store - Sea Foam](https://chromewebstore.google.com/detail/sea-foam/lahipjfggmgneaopcckkaipmoandaboo) → Remove from Brave → Add to Brave again.

## Disable Window Animation on Workspace Switch

GNOME 46 / Ubuntu 24.04 introduced a window highlight animation after switching workspaces.

**Fix:** Settings → Ubuntu Desktop → disable "Enhanced Tiling"

Reference: https://askubuntu.com/questions/1523133/how-do-i-turn-off-active-window-animation-when-switching-workspaces-ubuntu-24-0

## ROCm Status

Despite disabling ROCm ld.so.conf files, ROCm compute still works:
```bash
rocm-smi  # Works
python -c "import torch; print(torch.cuda.is_available())"  # True
torch.rand(2,3).cuda()  # Works
```

The disabled ld.so.conf files were only for old amdgpu-pro display libraries, not the ROCm compute stack.

## Summary

| Item | Status |
|------|--------|
| GUI (Wayland) | Working |
| GUI (X11) | Working (fixed in devlog 020) |
| GNOME Extensions | Re-enabled |
| VS Code titlebar | Fixed (native) |
| Brave/Chrome titlebar | Upstream bug, no fix |
| Workspace animation | Fixed (disable Enhanced Tiling) |
| ROCm/PyTorch GPU | Working |
